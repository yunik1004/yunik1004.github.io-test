# .travis.yml
os:
  - linux

language: node_js

node_js:
  - "10"

cache:
  directories:
    - node_modules

branches:
  only:
    - code

addons:
  firefox: latest

env:
  - NODE_ENV=PROD

before_install:
  - wget https://github.com/mozilla/geckodriver/releases/download/v0.23.0/geckodriver-v0.23.0-linux64.tar.gz
  - mkdir geckodriver
  - tar -xzf geckodriver-v0.18.0-linux64.tar.gz -C geckodriver
  - export PATH=$PATH:$PWD/geckodriver
  - geckodriver --version
  - export MOZ_HEADLESS=1

install:
  - npm install
  - npm update

script:
  # Test
  - npm run lint
  - npm run test:unit
  - npm run test:e2e

after_success:
  # Set git config
  - git config --global user.email "yunik1004@gmail.com"
  - git config --global user.name "yunik1004"
  # Deploy to master branch
  - npm run build
  - git checkout master
  - git commit
  - git push -u origin master
